##AuthenticateUser

**Category:** Authentication<br />
**Permissions:** Public<br />
**CallType:** Synchronous

###Request

> Use this request call

```json
{
  "UserName": "",
  "Password": ""
}
```

> For API key authentication, the request will look as follows.

```json
{
  "APIKey": "28c68ac3fcfafc3d4e8d653fe57e5baf",
  "Signature": "29c15c42e4fabcc9e229421e148e647903927c503ab4578ada55bb13a63a9636",
  "UserId": "96",
  "Nonce": "2247733562"
}
```

```http
GET /hello.htm HTTP/1.1
User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)
Host: hostname
Accept-Language: en-us
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
```

### HTTP Request

`POST https://hostname/AP/AuthenticateUser`

Authenticates a user for the current websocket session.

| Key      | Value                                      |
| -------- | ------------------------------------------ |
| Username | **string.** The user's assigned user name. |
| Password | **string.** The user's assigned password.  |

or

| Key       | Value                                                                                           |
| --------- | ----------------------------------------------------------------------------------------------- |
| APIKey    | **string.** This is an AlphaPoint-generated key used in user-identification.                    |
| Signature | **string.** A long, alphanumeric string generated by AlphaPoint by using the APIKey and Nonce.  |
| UserId    | **string.** The ID of the user, stated as a string.                                             |
| Nonce     | **string.** Any arbitrary number or random string used with the APIKey to generate a signature. |

or

| Header        | Value                                                                                     |
| ------------- | ----------------------------------------------------------------------------------------- |
| Authorization | **string.** Base64 encoded value of username and password in the format username:password |

###Response

> Authenticated response

```json
{
  "authenticated": true,
  "user": {
    "userId": 0,
    "userName": "",
    "email": "",
    "emailVerified": false,
    "accountId": 0,
    "omsId": 0,
    "use2FA": false
  },
  "locked": false,
  "requires2FA": false,
  "twoFAType": "",
  "twoFAToken": "",
  "errormsg": ""
}
```

> False authenticated response

```json
{
  "authenticated": false,
  "locked": false,
  "errormsg": "Invalid username or password"
}
```

| Key           | Value                                                                                                                                                                                               |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| authenticated | **Boolean.** _True_ if the user is authenticated; _false_ otherwise.                                                                                                                                |
| user          | JSON user object (below)                                                                                                                                                                            |
| locked        | **Boolean.** _True_ if this affiliated user is currently locked; _false_ otherwise. A user may be locked by trying to log in too many times in rapid succession. He must be _unlocked_ by an admin. |
| requires2FA   | **Boolean.** _True_ if the user must use two-factor authentication; _false_ otherwise.                                                                                                              |
| twoFAType     | **string.** Returns the type of 2FA this user requires. For example, "Google."                                                                                                                      |
| twoFAToken    | **string.** Returns an appropriate token. In the case of Google, this is a QR code.                                                                                                                 |
| errormsg      | **string.** A successful receipt of the call returns _null_.                                                                                                                                        |

JSON user object:

| Key           | Value                                                                                                         |
| ------------- | ------------------------------------------------------------------------------------------------------------- |
| userId        | **integer.** The ID of the user being authenticated on the exchange.                                          |
| userName      | **string.** The name of the user.                                                                             |
| email         | **string.** The email address of the user.                                                                    |
| emailVerified | **Boolean.** Whether the email address has been verified by the registration process or directly by an Admin. |
| accountId     | **integer.** The ID of the account with which the user is associated (each user has a default account).       |
| omsId         | **integer.** The ID of the Order Management System with which the user and account are associated.            |
| use2FA        | **Boolean.** _True_ if the user must use 2FA to log in; _false_ otherwise.                                    |
