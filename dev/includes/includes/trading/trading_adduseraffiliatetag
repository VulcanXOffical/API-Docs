<h2 id='adduseraffiliatetag'>AddUserAffiliateTag</h2>
<p><strong>Category:</strong> Trading<br />
<strong>Permissions:</strong> Operator, Trading<br />
<strong>Call Type:</strong> Synchronous</p>

<p>Associates an affiliate tag to a user. An exchange operator boost signups by can encouraging its current users to invite others to join by rewarding a user for every invite. For a user to be rewarded for every successful invite he/she makes, he needs to send an invite link together with his <strong>AffiliateTag</strong>. A user with elevated permission can add an affiliate tag for another user. A user can only have 1 affiliate tag at a time, if there is already an existing affiliate tag for the user, the affiliate tag in the request will replace the existing one.</p>
<h3 id='request'>Request</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">APEX</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">alphapoint-apex-api</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">apex</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">APEX</span><span class="p">(</span><span class="dl">"</span><span class="s2">websocket url goes here...</span><span class="dl">"</span><span class="p">);</span>

<span class="k">await</span> <span class="nx">apex</span><span class="p">.</span><span class="nx">RPCPromise</span><span class="p">(</span><span class="dl">'</span><span class="s1">AddUserAffiliateTag</span><span class="dl">'</span><span class="p">,{</span>
    <span class="dl">"</span><span class="s2">OMSId</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">UserId</span><span class="dl">"</span><span class="p">:</span> <span class="mi">6</span> <span class="c1">//optional</span>
    <span class="dl">"</span><span class="s2">AffiliateTag</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myaffiliatetag</span><span class="dl">"</span>
<span class="p">})</span>
</code></pre></div><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/AP/AddUserAffiliateTag</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">hostname goes here...</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">aptoken</span><span class="p">:</span> <span class="s">e6567bb5-0245-4cb3-b99e-b3adebe9c94c //valid session token</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">59</span>

<span class="p">{</span><span class="w">
    </span><span class="nl">"OMSId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"UserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="err">//Optional</span><span class="w">
    </span><span class="nl">"AffiliateTag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myaffiliatetag"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>OMSId</td>
<td><strong>integer.</strong> The ID of the Order Management System on which the user operates.<em>optional.</em></td>
</tr>
<tr>
<td>UserId</td>
<td><strong>integer.</strong> ID of the user to whom the Affiliate tag will be added. If not specified, affiliate tag will be added for the user currently logged-in.<em>optional.</em></td>
</tr>
<tr>
<td>AffiliateTag</td>
<td><strong>string.</strong> The alphanumeric tag that will be set for the user.<em>required.</em></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">result</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">errormsg</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">errorcode</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">detail</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight http tab-http"><code><span class="err">{
    "result": true,
    "errormsg": null,
    "errorcode": 0,
    "detail": null
}
</span></code></pre></div>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><strong>Boolean.</strong> <em>True</em> signifies that the server has received the request to associate the affiliate tag with a specific user (not that it has done so); <em>false</em> signifies an error.</td>
</tr>
<tr>
<td>errormsg</td>
<td><strong>string.</strong> A successful response returns <em>null</em>; the <em>errormsg</em> parameter for an unsuccessful response returns one of the following messages: Not Authorized (<em>errorcode</em> 20), Invalid Request (<em>errorcode</em> 100), Operation Failed (<em>errorcode</em> 101), Server Error (<em>errorcode</em> 102), Resource Not Found (<em>errorcode</em> 104)</td>
</tr>
<tr>
<td>errorcode</td>
<td><strong>integer.</strong> A successful response returns 0. An unsuccessful response returns one of the <em>errorcodes</em> shown in the <em>errormsg</em> list.</td>
</tr>
<tr>
<td>detail</td>
<td><strong>string.</strong> Message text that the system may send. Usually <em>null</em>.</td>
</tr>
</tbody></table>
